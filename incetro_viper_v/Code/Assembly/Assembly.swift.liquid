{% include 'header' %}
// swiftlint:disable unused_closure_parameter

import Swinject
import TransitionHandler

// MARK: - {{ prefix }}{{ module_info.name }}ModuleAssembly

final {{ privacy }}class {{ prefix }}{{ module_info.name }}ModuleAssembly: CollectableAssembly {

    // MARK: - Initializers

    required {{ privacy }}init() {
    }

    // MARK: - Useful

    {{ privacy }}func obtainView() -> {{ prefix }}{{ module_info.name }}View {
        container.resolve({{ prefix }}{{ module_info.name }}View.self).unwrap()
    }

    // MARK: - Assembly

    {{ privacy }}func assemble(inContainer container: Container) {

        container.register({{ prefix }}{{ module_info.name }}View.self) { resolver in
            let view = {{ prefix }}{{ module_info.name }}View()
            view.output = resolver.resolve(
                {{ prefix }}{{ module_info.name }}ViewOutput.self,
                argument: view as {{ prefix }}{{ module_info.name }}ViewInput
            )
            return view
        }

        container.register({{ prefix }}{{ module_info.name }}ViewOutput.self) { (resolver, view: {{ prefix }}{{ module_info.name }}ViewInput) in
            let interactor = resolver
                .resolve({{ prefix }}{{ module_info.name }}InteractorInput.self)
                .unwrap(as: {{ prefix }}{{ module_info.name }}Interactor.self)
            let presenter = {{ prefix }}{{ module_info.name }}Presenter(
                view: view,
                interactor: interactor
            )
            interactor.output = presenter
            return presenter
        }

        container.register({{ prefix }}{{ module_info.name }}InteractorInput.self) { resolver in
            let interactor = {{ prefix }}{{ module_info.name }}Interactor()
            return interactor
        }
    }
}
